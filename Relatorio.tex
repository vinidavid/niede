\documentclass[12pt]{article}

%% Escrevendo em português:
\usepackage[brazil]{babel}
\usepackage[utf8]{inputenc}
\usepackage[pdftex]{hyperref}
\usepackage{epstopdf}
\usepackage{psfrag}
\usepackage{setspace}
\usepackage{graphicx}
\usepackage{color}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{float}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{grafcet}
%----------------------------


\newtheorem{teorema}{Teorema}%[chapter]
\newtheorem{problema}[teorema]{Problema}
\newtheorem{conj}[teorema]{Conjectura}
\newtheorem{lema}[teorema]{Lema}
\newtheorem{exerc}[teorema]{Exercício}

\definecolor{lightgray}{gray}{0.95}

% Ad hoc macros
\newcommand{\qed}       {\hfill\Box}
\newcommand{\card}[1]   {\left|#1\right|}
\newcommand{\nct}       {\chi_{_T}}
\newcommand{\cnk}[2]    {C_{#1}^{#2}}
\newcommand{\ed}[2]     {#1#2}
\newcommand{\teto}[1]   {\lceil #1 \rceil}
\newcommand{\piso}[1]   {\lfloor #1 \rfloor}
\newcommand{\itab}[1]{\hspace{0em}\rlap{#1}}
\newcommand{\tab}[1]{\hspace{.2\textwidth}\rlap{#1}}

%%%%%%%%%%%%%%%%
\begin{document}
	%%%%%%%%%%%%%%%%
	\input{capa.tex}
	
	\tableofcontents
	%\listoffigures
	%\listoftables
	
	\clearpage
	
	%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
	\section{Descrição Técnica do Processo}
	
	Este relatório consiste na descrição da solução encontrada para o problema da maturação e filtragem da produção de cerveja. O processo começa após a fermentação da cerveja verde que é mandada para tanques de maturação como o da figura \ref{fig:maturador} (válvula $V_{cv}$ e $timer_1$). No tanque a cerveja verde permanece entre 1h e 3h ($timer2$) com controle constante de sua temperatura, esta necessitando estar em $0ºC$, ou no máximo entre $-5$ e $5ºC$. Este controle de temperatura deve ser feito com base no acionamento do fluido refrigerante ($V_{fr}$) e em um sensor de temperatura ($S_t$).
	
	\begin{figure}[H]
		\centering
		\includegraphics [width=4in]{tanque.png}
		\caption {Tanque de maturação da cerveja verde.}
		\label{fig:maturador}
	\end{figure}
	
	Passado este tempo e com sucesso do controle de temperatura a cerveja verde torna-se cerveja madura e é despeja na próxima etapa (válvula $V_{cm}$). A etapa consiste em passar por um filtro com terra diatomácea (válvula $V_{td}$), que retira partículas desagradáveis à cerveja, como o mostrado na figura \ref{fig:filtro}. 
	
	O resíduo do filtro deve ser descartado após o uso, o seu descarte é feito pela acionamento de uma válvula ($V_r$) que dependerá de um sensor ($S_{bf}$).
	
	
	Tanto a válvula de despejo da cerveja maturada quanto a da terra diatomácea dependem do sensor de volume do tanque de maturação ($S_{bm}$).
	
	\begin{figure}[H]
		\centering
		\includegraphics [width=4in]{filtro.png}
		\caption {Filtro da cerveja maturada}
		\label{fig:filtro}
	\end{figure}
	
	Após a filtragem a cerveja é então destinada à próxima etapa da sua fabricação, sendo esta não descrita por este trabalho.
	
	\section {Análise do Projeto}
	Para a primeira etapa do projeto nós acrescentamos um sensor de nível baixo no taque do maturador, afim de verificar que este está de fato vazio antes de preenchê-lo com cerveja verde. Como não existe perigo de que muita cerveja verde seja fornecida para o tanque (uma vez que a quantidade disponível é limitada pelo tamanho do tanque anterior no processo), o procedimento é controlado através de um timer, estimamos que 10 minutos seja tempo mais que suficiente para preencher o tanque. Deixamos então a cerveja maturar por 2 horas, controlando a sua temperatura através de sensores.
	
	Enquanto o  tanque está sendo preenchido e durante o processo de maturação da cerveja, podemos realizar de maneira paralela a liberação dos resíduos do filtro, contanto que não exista mais cerveja maturada para ser filtrada, verificamos isso através de um sensor colocado um pouco abaixo do nível do filtro. Abrimos a válvula para liberação dos resíduos e a deixamos aberta até que a cerveja no maturador acabe de maturar, como a maturação é um processo lento, teremos tempo de sobra para esvaziar o filtro.
	
	Uma vez maturada, a cerveja segue para o a filtração onde receberá terra diatomácea. O controle da proporção entre cerveja e terra diatomácea se dá pela configuração manual das válvulas de liberação de ambas e não será abordada pelo programa.
	
	A figura \ref{fig:grafcet} mostra um diagrama grafcet da nossa implementação do processo.
	
	\begin{figure}[H]
		\centering
		\label{fig:grafcet}
		\begin{tikzpicture}
			\EtapeInit[0,0]{0}
			\Transition[VX0]{0}
			\DivET{T0}{-7.5/L10,7.5/L20}
			\Etape[VL10]{10}
			\Transition[VX10]{10}
			\EtapeEncapsulante[VT10]{20}
			\SequenceEE[VL20]{11}{21}
			\ConvET[7.5]{X20}{X21}{br3}
			\Transition[br3]{br3}
			\Etape[VTbr3]{4}
			\Transition[VX4]{4}
			\LienRetour[10]{T4}{X0}
			\ActionX{X10}{$V_cv$, inicia $timer_1$}
			\ActionActiv{X10}
			\ActionX{X20}{inicia $timer_2$}
			\ActionActiv{X20}
			\ActionX{X21}{$V_r$}
			\ActionX{X4}{$V_{cm}$,$V_{td}$}
			\Recept{T0}{$\overline{S_{bm}}\cdot Start$}
			\Recept{T10}{$timer_1 > 10min$}
			\Recept{Tbr3}{$timer_2 > 1h30mins$}
			\Recept{T11}{$\overline{S_{bf}}$}
			\Recept{T4}{$\overline{S_{bm}}$}
			
			\begin{Encap}[nom]{7.5,-1.5}{20}{Refrigeração}
			\Etape[0,0]{200}
			\Transition[VX200]{200}
			\Etape[VT200]{300}
			\Transition[VX300]{300}
			\LienRetour{T300}{X200}
			\LienActivation{X200}
			\ActionX{X300}{$V_r$}
			\Recept{T200}{$S_t \geq 5ºC$}
			\Recept{T300}{$S_t \le -5ºC$}
			\end{Encap}
		
		\end{tikzpicture}
		\caption{Diagrama grafcet do projeto}
	\end{figure}
	
	\subsection{Modo Automático}
	O modo automático consiste na mudança de estado automática. Quando todas as condições necessárias para a mudança de estado se tornam verdadeiras e o modo automático está ativo a mudança de estado acontecerá, sendo assim, não sendo necessária a atuação humana. Este modo permite um processo mais rápido e mais barato por não necessitar de um funcionário presente para fazer as transições. Contudo poderá haver problemas caso a verificação para as condições estiver com problema, se os sensores, por exemplo, estiverem com problema o processo pode avançar mesmo não sendo o momento apropriado para tal.
	
	\subsection{Modo Passo a Passo}
	
	O modo passo a passo é o oposto do modo automático, sendo assim necessário a atuação humana para a transição de estados. Com todas as condições de transição verdadeiras o processo apenas mudará de estado caso um botão no IHM (interface homem máquina) seja apertado manualmente. Caso ascondições de transição não sejam obdecidas e o operador utilizar o botão do IHM nada acontecerá.
	
	O valor do modo passo a passo é verificado em teste, já que o processo pode ser totaltmente controlado pelo engenheiro de qualidade, testando todas as transições e funcionalidade das entradas (sensores e timers) do sistema.
	
	\subsection{Modo Homming}
	
	O modo Homming quando acionado imposibilitará a transição do estado inicial (Home) para o próximo. A transição somente ocorrerá quando o botão "Iniciar" da IHM for apertado. Ele funciona como o modo passo a passo, mas somente para o estado Home, todos os demais funcionam normalmente, estamo no modo passo a passo ou no modo automático.
	
	\subsection{Parada de emergência}
	
	
	\subsection{Alarmes e tratamentos de Erros}
	
	
	\subsection{IHM}

\section {Tabela de designação}
\begin{table}[H]
	\caption{Tabela de Input.}
	\centering
	\begin{tabular}{|  p{2cm} | p{10cm} | p{2cm} | }
		\hline
		Entrada & Utilidade & Posição\\
		\hline
		$S_{bm}$ & sensor de volume baixo no tanque de maturação & $\%I1.0$ \\
		$S_t$ & sensor de temperatura no tanque de maturação & $\%MD1$ \\
		$S_{bf}$ & sensor de volume baixo do filtro & $\%I1.1$ \\
		\hline
	\end{tabular}
\end{table}


\begin{table}[H]
	\caption{Tabela de Output.}
	\centering
	\begin{tabular}{|  p{2cm} | p{10cm} | p{2cm} | }
		\hline
		Atuador & Utilidade & Posição\\
		\hline
  		$V_{cv}$ & acionamento da válvula da cerveja verde & $\%Q6.3$ \\
  		$V_{cm}$ & acionamento da válvula da cerveja maturada & $\%Q6.2$ \\
 		$V_{fr}$ & acionamento da válvula de fluido refrigerante & $\%Q7.0$ \\
		$V_{td}$ & acionamento da válvula de terra diatomácea & $\%Q7.1$ \\
		$V_r$ & acionamento da válvula de descarte & $\%Q7.2$ \\
 		\hline
	\end{tabular}
\end{table}


\begin{table}[H]
	\caption{Tabela de Temporizadores.}
	\centering
	\begin{tabular}{|  p{2cm} | p{10cm} | p{2cm} | }
		\hline
		Nome & Utilidade & Posição\\
		\hline
		$timer_1$ &  temporizador de entrada da cerveja verde & $\%M5.5$ \\
		$timer_2$ & temporizador da maturação da cerveja verde & $\%M5.6$ \\
		 \hline
	\end{tabular}
\end{table}

\section {Implementação do sistema}

\section {Conclusões}


\begin{thebibliography}{5}
	
	\bibitem{Ogata11} K. Ogata, \emph{Engenharia de Controle Moderno}, 6ª edição, 2011.
	
\end{thebibliography}

\end{document}
